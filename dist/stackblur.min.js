!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).StackBlur={})}(this,(function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a(t,r,n,a,o){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===e(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=t.getContext("2d");try{return i.getImageData(r,n,a,o)}catch(t){throw new Error("unable to access image data: "+t)}}function o(t,e,r,n,o,f){if(!(isNaN(f)||f<1)){f|=0;var g=a(t,e,r,n,o);g=i(g,e,r,n,o,f),t.getContext("2d").putImageData(g,e,r)}}function i(t,e,a,o,i,f){for(var g,c=t.data,v=2*f+1,l=o-1,s=i-1,x=f+1,b=x*(x+1)/2,d=new u,y=d,p=1;p<v;p++)y=y.next=new u,p===x&&(g=y);y.next=d;for(var m=null,h=null,w=0,B=0,C=r[f],E=n[f],I=0;I<i;I++){y=d;for(var S=c[B],N=c[B+1],R=c[B+2],D=c[B+3],G=0;G<x;G++)y.r=S,y.g=N,y.b=R,y.a=D,y=y.next;for(var j=0,A=0,k=0,T=0,W=x*S,_=x*N,H=x*R,M=x*D,O=b*S,P=b*N,q=b*R,z=b*D,F=1;F<x;F++){var J=B+((l<F?l:F)<<2),K=c[J],L=c[J+1],Q=c[J+2],U=c[J+3],V=x-F;O+=(y.r=K)*V,P+=(y.g=L)*V,q+=(y.b=Q)*V,z+=(y.a=U)*V,j+=K,A+=L,k+=Q,T+=U,y=y.next}m=d,h=g;for(var X=0;X<o;X++){var Y=z*C>>E;if(c[B+3]=Y,0!==Y){var Z=255/Y;c[B]=(O*C>>E)*Z,c[B+1]=(P*C>>E)*Z,c[B+2]=(q*C>>E)*Z}else c[B]=c[B+1]=c[B+2]=0;O-=W,P-=_,q-=H,z-=M,W-=m.r,_-=m.g,H-=m.b,M-=m.a;var $=X+f+1;$=w+($<l?$:l)<<2,O+=j+=m.r=c[$],P+=A+=m.g=c[$+1],q+=k+=m.b=c[$+2],z+=T+=m.a=c[$+3],m=m.next;var tt=h,et=tt.r,rt=tt.g,nt=tt.b,at=tt.a;W+=et,_+=rt,H+=nt,M+=at,j-=et,A-=rt,k-=nt,T-=at,h=h.next,B+=4}w+=o}for(var ot=0;ot<o;ot++){var it=c[B=ot<<2],ft=c[B+1],gt=c[B+2],ut=c[B+3],ct=x*it,vt=x*ft,lt=x*gt,st=x*ut,xt=b*it,bt=b*ft,dt=b*gt,yt=b*ut;y=d;for(var pt=0;pt<x;pt++)y.r=it,y.g=ft,y.b=gt,y.a=ut,y=y.next;for(var mt=o,ht=0,wt=0,Bt=0,Ct=0,Et=1;Et<=f;Et++){B=mt+ot<<2;var It=x-Et;xt+=(y.r=it=c[B])*It,bt+=(y.g=ft=c[B+1])*It,dt+=(y.b=gt=c[B+2])*It,yt+=(y.a=ut=c[B+3])*It,Ct+=it,ht+=ft,wt+=gt,Bt+=ut,y=y.next,Et<s&&(mt+=o)}B=ot,m=d,h=g;for(var St=0;St<i;St++){var Nt=B<<2;c[Nt+3]=ut=yt*C>>E,ut>0?(ut=255/ut,c[Nt]=(xt*C>>E)*ut,c[Nt+1]=(bt*C>>E)*ut,c[Nt+2]=(dt*C>>E)*ut):c[Nt]=c[Nt+1]=c[Nt+2]=0,xt-=ct,bt-=vt,dt-=lt,yt-=st,ct-=m.r,vt-=m.g,lt-=m.b,st-=m.a,Nt=ot+((Nt=St+x)<s?Nt:s)*o<<2,xt+=Ct+=m.r=c[Nt],bt+=ht+=m.g=c[Nt+1],dt+=wt+=m.b=c[Nt+2],yt+=Bt+=m.a=c[Nt+3],m=m.next,ct+=it=h.r,vt+=ft=h.g,lt+=gt=h.b,st+=ut=h.a,Ct-=it,ht-=ft,wt-=gt,Bt-=ut,h=h.next,B+=o}}return t}function f(t,e,r,n,o,i){if(!(isNaN(i)||i<1)){i|=0;var f=a(t,e,r,n,o);f=g(f,e,r,n,o,i),t.getContext("2d").putImageData(f,e,r)}}function g(t,e,a,o,i,f){for(var g,c=t.data,v=2*f+1,l=o-1,s=i-1,x=f+1,b=x*(x+1)/2,d=new u,y=d,p=1;p<v;p++)y=y.next=new u,p===x&&(g=y);y.next=d;for(var m,h,w=null,B=null,C=r[f],E=n[f],I=0,S=0,N=0;N<i;N++){var R=c[S],D=c[S+1],G=c[S+2],j=x*R,A=x*D,k=x*G,T=b*R,W=b*D,_=b*G;y=d;for(var H=0;H<x;H++)y.r=R,y.g=D,y.b=G,y=y.next;for(var M=0,O=0,P=0,q=1;q<x;q++)m=S+((l<q?l:q)<<2),T+=(y.r=R=c[m])*(h=x-q),W+=(y.g=D=c[m+1])*h,_+=(y.b=G=c[m+2])*h,M+=R,O+=D,P+=G,y=y.next;w=d,B=g;for(var z=0;z<o;z++)c[S]=T*C>>E,c[S+1]=W*C>>E,c[S+2]=_*C>>E,T-=j,W-=A,_-=k,j-=w.r,A-=w.g,k-=w.b,m=I+((m=z+f+1)<l?m:l)<<2,T+=M+=w.r=c[m],W+=O+=w.g=c[m+1],_+=P+=w.b=c[m+2],w=w.next,j+=R=B.r,A+=D=B.g,k+=G=B.b,M-=R,O-=D,P-=G,B=B.next,S+=4;I+=o}for(var F=0;F<o;F++){var J=c[S=F<<2],K=c[S+1],L=c[S+2],Q=x*J,U=x*K,V=x*L,X=b*J,Y=b*K,Z=b*L;y=d;for(var $=0;$<x;$++)y.r=J,y.g=K,y.b=L,y=y.next;for(var tt=0,et=0,rt=0,nt=1,at=o;nt<=f;nt++)S=at+F<<2,X+=(y.r=J=c[S])*(h=x-nt),Y+=(y.g=K=c[S+1])*h,Z+=(y.b=L=c[S+2])*h,tt+=J,et+=K,rt+=L,y=y.next,nt<s&&(at+=o);S=F,w=d,B=g;for(var ot=0;ot<i;ot++)c[m=S<<2]=X*C>>E,c[m+1]=Y*C>>E,c[m+2]=Z*C>>E,X-=Q,Y-=U,Z-=V,Q-=w.r,U-=w.g,V-=w.b,m=F+((m=ot+x)<s?m:s)*o<<2,X+=tt+=w.r=c[m],Y+=et+=w.g=c[m+1],Z+=rt+=w.b=c[m+2],w=w.next,Q+=J=B.r,U+=K=B.g,V+=L=B.b,tt-=J,et-=K,rt-=L,B=B.next,S+=o}return t}var u=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};t.BlurStack=u,t.canvasRGB=f,t.canvasRGBA=o,t.image=function(t,e,r,n){if("string"==typeof t&&(t=document.getElementById(t)),t&&"naturalWidth"in t){var a=t.naturalWidth,i=t.naturalHeight;if("string"==typeof e&&(e=document.getElementById(e)),e&&"getContext"in e){e.style.width=a+"px",e.style.height=i+"px",e.width=a,e.height=i;var g=e.getContext("2d");g.clearRect(0,0,a,i),g.drawImage(t,0,0),isNaN(r)||r<1||(n?o(e,0,0,a,i,r):f(e,0,0,a,i,r))}}},t.imageDataRGB=g,t.imageDataRGBA=i,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=stackblur.min.js.map
